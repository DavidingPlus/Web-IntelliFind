import{_ as J}from"./PageContainer-0cbf34de.js";import{ai as H,r as s,V,o as I,b as N,x as B,w as l,e as a,z as n,d as r,aj as y,h as d,t as f,c as j,X as q,Y as W,B as X,ak as P,a0 as E,a9 as b,al as Y,am as $,an as K,a6 as Q,a8 as U,$ as Z,ae as w}from"./index-a9c24727.js";/* empty css                */import{i as D}from"./index-c25176ff.js";import{a as ee,f as ae}from"./format-b17c07d5.js";import"./_plugin-vue_export-helper-c27b6911.js";const te={class:"cell-item"},le={class:"cell-item"},ne={class:"cell-item"},oe={class:"cell-item"},re=r("br",null,null,-1),se=r("br",null,null,-1),ue=r("br",null,null,-1),ie=r("br",null,null,-1),ce={class:"long-text-container"},ve=r("h3",null,"综合分析及建议",-1),me=["innerHTML"],be={__name:"JsonShow",props:{file_name:{type:String,required:!0}},setup(_e){const G=H(),h=s(""),v=s([{name:"位置信息",value:""},{name:"客户端",value:""},{name:"解析时间",value:""}]),u=s([{word:"页面加载报错",name:"console_errors",value:""},{word:"点击报错",name:"error_count",value:""},{word:"网络响应慢",name:"feedback_interval",value:""},{word:"页面出现白屏",name:"is_blank",value:""},{word:"页面无响应",name:"no_reaction",value:""},{word:"出现多类问题",name:"occur_many",value:""},{word:"页面加载慢",name:"page_load",value:""},{word:"重复点击",name:"repeat_click",value:""},{word:"跳出率较高",name:"stay_time",value:""}]),R=s(0),L=s([]),c=s([{name:"页面加载报错",word:"console_errors",value:""},{name:"点击报错",word:"error_count",value:""},{name:"网络响应慢",word:"feedback_interval",value:""},{name:"页面出现白屏",word:"is_blank",value:""},{name:"页面无响应",word:"no_reaction",value:""},{name:"出现多类问题",word:"occur_many",value:""},{name:"页面加载慢",word:"page_load",value:""},{name:"重复点击",word:"repeat_click",value:""},{name:"跳出率较高",word:"stay_time",value:""}]),t=s([{name:"页面加载报错",paramName:"console_errors",value:"",comment:""},{name:"点击报错",paramName:"error_count",value:"",comment:""},{name:"网络响应慢",paramName:"feedback_interval",value:"",comment:""},{name:"页面出现白屏",paramName:"is_blank",value:"",comment:""},{name:"页面无响应",paramName:"no_reaction",value:"",comment:""},{name:"出现多类问题",paramName:"occur_many",value:"",comment:""},{name:"页面加载慢",paramName:"page_load",value:"",comment:""},{name:"重复点击",paramName:"repeat_click",value:"",comment:""},{name:"跳出率较高",paramName:"stay_time",value:"",comment:""}]),m=s([]),T=s(""),F=async()=>{console.log(typeof h.value);const{data:{data:e}}=await ee(h.value);v.value[0].value=e.basic_info.Province+" "+e.basic_info.City+"  ip: "+e.basic_info.Ip,v.value[1].value=e.basic_info.OperatingSystem+" "+e.basic_info.DeviceType+" "+e.basic_info.Broswer,v.value[2].value=ae(e.basic_info.CreateTime),u.value[0].value=e.settings.console_errors,u.value[1].value=e.settings.error_count,u.value[2].value=e.settings.feedback_interval,u.value[3].value=e.settings.is_blank,u.value[4].value=e.settings.no_reaction,u.value[5].value=e.settings.occur_many,u.value[6].value=e.settings.page_load,u.value[7].value=e.settings.repeat_click,u.value[8].value=e.settings.stay_time,R.value=(e.result.total_score/50).toFixed(2),L.value=u.value.map(i=>i.value),c.value[0].value=e.result.console_errors,c.value[1].value=e.result.error_count,c.value[2].value=e.result.feedback_interval,c.value[3].value=e.result.is_blank,c.value[4].value=e.result.no_reaction,c.value[5].value=e.result.occur_many,c.value[6].value=e.result.page_load,c.value[7].value=e.result.repeat_click,c.value[8].value=e.result.stay_time,t.value[0].value=e.result.console_errors,t.value[1].value=e.result.error_count,t.value[2].value=e.result.feedback_interval,t.value[3].value=e.result.is_blank,t.value[4].value=e.result.no_reaction,t.value[5].value=e.result.occur_many,t.value[6].value=e.result.page_load,t.value[7].value=e.result.repeat_click,t.value[8].value=e.result.stay_time;const p=e.result.brief_desc,o=new RegExp("(?<=，)(.*?)(?=，得分)","g");m.value=p.match(o),t.value[0].comment=m.value[5],t.value[1].comment=m.value[4],t.value[2].comment=m.value[3],t.value[3].comment=m.value[6],t.value[4].comment="网络流畅情况下，未出现明显页面无响应情况",t.value[5].comment=m.value[7],t.value[6].comment=m.value[2],t.value[7].comment=m.value[1],t.value[8].comment=m.value[0];const _=e.result.detail_desc;T.value=_.replace(/\n/g,"<br> &nbsp; &nbsp; &nbsp; &nbsp;")},M=s("default"),g=V(()=>{const e={large:"8px",default:"6px",small:"4px"};return{marginRight:e[M.value]||e.default}}),k=s([]),C=s(null),x=s(null),S=s(null);I(async()=>{if(h.value=G.query.file_name,console.log(h.value),await F(),k.value){const e=k.value.clientWidth/3,p=390;if(C.value){const o=D(C.value);o.resize({width:e,height:p});const _={title:{text:"     综合得分表"},series:[{type:"gauge",startAngle:180,endAngle:0,center:["50%","75%"],radius:"90%",min:0,max:1,splitNumber:8,axisLine:{lineStyle:{width:6,color:[[.25,"#FF6E76"],[.5,"#FDDD60"],[.75,"#58D9F9"],[1,"#7CFFB2"]]}},pointer:{icon:"path://M12.8,0.7l12,40.1H0.7L12.8,0.7z",length:"12%",width:20,offsetCenter:[0,"-60%"],itemStyle:{color:"auto"}},axisTick:{length:12,lineStyle:{color:"auto",width:2}},splitLine:{length:20,lineStyle:{color:"auto",width:5}},axisLabel:{color:"#464646",fontSize:20,distance:-60,rotate:"tangential",formatter:function(i){return i===.875?"Grade A":i===.625?"Grade B":i===.375?"Grade C":i===.125?"Grade D":""}},title:{offsetCenter:[0,"-10%"],fontSize:20},detail:{fontSize:30,offsetCenter:[0,"-35%"],valueAnimation:!0,formatter:function(i){return Math.round(i*100)+""},color:"inherit"},data:[{value:R.value,name:"Grade"}]}]};o.setOption(_)}if(x.value){const o=D(x.value);o.resize({width:e,height:p});const _={title:{text:"各项参数权重图    ",left:"center"},radar:{indicator:u.value.map(i=>({name:i.word,max:100}))},series:[{type:"radar",data:[{value:L.value}]}]};o.setOption(_)}if(S.value){const o=D(S.value);o.resize({width:e,height:p});const _={title:{text:"各项具体得分表         ",left:"right"},tooltip:{trigger:"item"},series:[{name:"各项具体得分表",type:"pie",radius:"50%",data:c.value,emphasis:{itemStyle:{shadowBlur:10,shadowOffsetX:0,shadowColor:"rgba(0, 0, 0, 0.5)"}}}]};o.setOption(_)}}});const O=({row:e})=>e.value>=90?"success-row":e.value<=80?"warning-row":"";return(e,p)=>{const o=X,_=P,i=J;return N(),B(i,{title:"JSON解析详情展示"},{default:l(()=>[a(n(E),{class:"margin-top",title:"用户环境配置信息",column:3,border:""},{default:l(()=>[a(n(b),null,{label:l(()=>[r("div",te,[a(o,{style:y(g.value)},{default:l(()=>[a(n(Y))]),_:1},8,["style"]),d(" "+f(v.value[0].name),1)])]),default:l(()=>[d(" "+f(v.value[0].value),1)]),_:1}),a(n(b),null,{label:l(()=>[r("div",le,[a(o,{style:y(g.value)},{default:l(()=>[a(n($))]),_:1},8,["style"]),d(" "+f(v.value[1].name),1)])]),default:l(()=>[d(" "+f(v.value[1].value),1)]),_:1}),a(n(b),null,{label:l(()=>[r("div",ne,[a(o,{style:y(g.value)},{default:l(()=>[a(n(K))]),_:1},8,["style"]),d(" "+f(v.value[2].name),1)])]),default:l(()=>[d(" "+f(v.value[2].value),1)]),_:1})]),_:1}),a(n(E),{class:"margin-top",title:"用户权重配置信息",column:3,border:""},{default:l(()=>[(N(!0),j(W,null,q(u.value,(z,A)=>(N(),B(n(b),{key:A},{label:l(()=>[r("div",oe,[a(o,{style:y(g.value)},{default:l(()=>[a(n(Q))]),_:1},8,["style"]),d(" "+f(z.word),1)])]),default:l(()=>[a(n(U),null,{default:l(()=>[d(f(z.value),1)]),_:2},1024)]),_:2},1024))),128))]),_:1}),re,se,ue,r("div",{ref_key:"chartContainRef",ref:k,style:{display:"flex","justify-content":"space-between"}},[r("div",{ref_key:"gradeChartRef",ref:C},null,512),r("div",{ref_key:"ratioChartRef",ref:x},null,512),r("div",{ref_key:"exactGradeChartRef",ref:S},null,512)],512),a(n(Z),{data:t.value,style:{width:"100%"},"row-class-name":O},{default:l(()=>[a(n(w),{prop:"name",label:"参数名",width:"180"}),a(n(w),{prop:"paramName",label:"英文名",width:"180"}),a(n(w),{prop:"value",label:"该项得分",width:"180"}),a(n(w),{prop:"comment",label:"详细评判"})]),_:1},8,["data"]),ie,r("div",ce,[a(_,null,{default:l(()=>[ve,r("p",{innerHTML:T.value},null,8,me)]),_:1})])]),_:1})}}};export{be as default};
