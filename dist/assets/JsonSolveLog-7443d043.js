import{r as a,u as M,b as f,x as v,w as o,e as l,h as p,W as q,t as y,z as h,d,A as G,Z as I,m as O,ac as W,ad as Z,ae as H,$ as K,af as Q,a3 as U,ag as X,ah as Y}from"./index-a9c24727.js";/* empty css                 */import{_ as ee}from"./PageContainer-0cbf34de.js";/* empty css                     *//* empty css                    */import"./el-tooltip-4ed993c7.js";import{g as ae,d as te,f as oe}from"./format-b17c07d5.js";import{i as le}from"./index-c25176ff.js";/* empty css                   */import"./_plugin-vue_export-helper-c27b6911.js";const ne=d("br",null,null,-1),se=d("br",null,null,-1),ie=d("br",null,null,-1),he={__name:"JsonSolveLog",setup(ce){const _=a(),x=M(),m=a(!1),b=a([]),c=a(0),T=a(0),L=a([]),k=a([]),C=a([]),S=a([]),g=a(null),E=a([]),s=a({page:1,size:7}),r=async()=>{_.value=!1,m.value=!0;const e=await ae(s.value);b.value=e.data.data,c.value=e.data.length,T.value=e.data.total_page,c.value?(m.value=!1,console.log(c.value)):_.value=!0,L.value=e.data.data.map(t=>t.total_score.toFixed(2)),k.value=e.data.data.map(t=>t.page_error.toFixed(2)),C.value=e.data.data.map(t=>t.page_load.toFixed(2)),S.value=e.data.data.map(t=>t.page_experience.toFixed(2)),A()};r();const B=e=>{s.value.page=1,s.value.size=e,r()},D=e=>{s.value.page=e,r()},F=async e=>{await G.confirm("此操作将永久删除该记录, 是否继续?","提示",{confirmButtonText:"确定",cancelButtonText:"取消",type:"warning"}),await te(e.file_name),console.log("删除成功"+e.file_name),setTimeout(()=>{r(),console.log("列表刷新成功"+e.file_name),I.success("删除成功"),console.log(c.value)},300)},w=()=>{x.push("/json/solve")},j=e=>{console.log(e.file_name),console.log(typeof e.file_name),x.push({path:"/json/show",query:{file_name:e.file_name}})},A=()=>{if(E.value=[{name:"综合得分",data:L.value},{name:"页面报错得分",data:k.value},{name:"页面加载得分",data:C.value},{name:"页面体验得分",data:S.value}],g.value){const e=le(g.value),t={title:{text:"最近七次解析反馈数据"},tooltip:{trigger:"axis"},legend:{data:["综合得分","页面报错得分","页面加载得分","页面体验得分"]},grid:{left:"3%",right:"4%",bottom:"0%",containLabel:!0},toolbox:{feature:{saveAsImage:{}}},xAxis:{type:"category",boundaryGap:!1,data:["第一次解析","第二次解析","第三次解析","第四次解析","第五次解析","第六次解析","第七次解析"]},yAxis:{type:"value"},series:E.value.map(i=>({name:i.name,data:i.data,type:"line"}))};e.setOption(t)}};return(e,t)=>{const i=O,J=W,z=Z,u=H,N=K,P=Q,R=ee,V=U;return f(),v(R,{title:"解析记录"},{extra:o(()=>[l(i,{type:"primary",onClick:w},{default:o(()=>[p("添加解析")]),_:1})]),default:o(()=>[_.value?(f(),v(J,{key:0,description:"暂无解析记录"})):q((f(),v(N,{key:1,data:b.value},{default:o(()=>[l(u,{label:"解析文件名",prop:"title"},{default:o(({row:n})=>[l(z,{type:"primary",underline:!1},{default:o(()=>[p(y(n.file_name),1)]),_:2},1024)]),_:1}),l(u,{label:"综合得分",prop:"title"},{default:o(({row:n})=>[l(z,{type:"primary",underline:!1},{default:o(()=>[p(y((n.total_score*2).toFixed(2)),1)]),_:2},1024)]),_:1}),l(u,{label:"解析时间",prop:"date"},{default:o(({row:n})=>[p(y(h(oe)(n.create_time)),1)]),_:1}),l(u,{label:"操作"},{default:o(({row:n})=>[l(i,{circle:"",plain:"",type:"primary",icon:h(X),onClick:$=>j(n)},null,8,["icon","onClick"]),l(i,{circle:"",plain:"",type:"danger",icon:h(Y),onClick:$=>F(n)},null,8,["icon","onClick"])]),_:1})]),_:1},8,["data"])),[[V,m.value]]),l(P,{"current-page":s.value.page,"page-size":s.value.size,background:!0,layout:"jumper, total, prev, sizes, pager, next, ->",total:c.value,onSizeChange:B,onCurrentChange:D,style:{"margin-top":"20px","justify-content":"flex-end"}},null,8,["current-page","page-size","total"]),ne,se,d("div",{ref_key:"chartRef",ref:g,style:{width:"100%",height:"400px"}},null,512),ie]),_:1})}}};export{he as default};
